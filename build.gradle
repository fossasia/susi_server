group 'org.loklak'
version '1.0'

apply plugin: 'groovy'
apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'application'

mainClassName = "org.loklak.SusiServer"


sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
    mavenCentral()
}

tasks.withType(Jar) {
    destinationDir = file("$rootDir/build/output/dist")
}

task generateJavaDoc(type: Javadoc) {
    source = sourceSets.main.allJava
    destinationDir = file("$rootDir/build/output/dist/html/javadoc")

}

test {
    exclude 'org/*'
}
task stage(dependsOn: ['build', 'clean', "run"]){
    build.mustRunAfter clean
    run.mustRunAfter build
}


dependencies {
    compile group: 'org.codehaus.groovy', name: 'groovy-all', version: '2.4.7'
    compile group: 'org.bouncycastle', name: 'bcprov-jdk15on', version: '1.55'
    compile group: 'org.bouncycastle', name: 'bcpkix-jdk15on', version: '1.55'
    compile group: 'org.apache.httpcomponents', name: 'httpclient', version: '4.5.2'
    compile group: 'org.apache.httpcomponents', name: 'httpcore', version: '4.4.5'
    compile group: 'org.apache.httpcomponents', name: 'httpmime', version: '4.5.2'
    compile group: 'javax.mail', name: 'mail', version: '1.4.7'
    compile group: 'org.jfree', name: 'jfreechart', version: '1.0.19'
    compile group: 'joda-time', name: 'joda-time', version: '2.9.6'
    compile group: 'org.jsoup', name: 'jsoup', version: '1.10.1'
    compile group: 'org.slf4j', name: 'slf4j-api', version: '1.7.21'
    compile group: 'org.apache.logging.log4j', name: 'log4j-1.2-api', version: '2.7'
    compile group: 'org.apache.logging.log4j', name: 'log4j-api', version: '2.7'
    compile group: 'org.apache.logging.log4j', name: 'log4j-core', version: '2.7'
    compile group: 'org.apache.logging.log4j', name: 'log4j-slf4j-impl', version: '2.7'
    compile group: 'org.eclipse.jetty', name: 'jetty-server', version: '9.3.14.v20161028'
    compile group: 'org.eclipse.jetty', name: 'jetty-servlet', version: '9.3.14.v20161028'
    compile group: 'org.eclipse.jetty', name: 'jetty-servlets', version: '9.3.14.v20161028'
    compile group: 'org.eclipse.jetty', name: 'jetty-util', version: '9.3.14.v20161028'
    compile group: 'org.eclipse.jetty', name: 'jetty-webapp', version: '9.3.14.v20161028'
    compile group: 'org.eclipse.jetty', name: 'jetty-http', version: '9.3.14.v20161028'
    compile group: 'org.eclipse.jetty', name: 'jetty-io', version: '9.3.14.v20161028'
    compile group: 'org.eclipse.jetty', name: 'jetty-rewrite', version: '9.3.14.v20161028'
    compile group: 'org.eclipse.jetty', name: 'jetty-security', version: '9.3.14.v20161028'
    compile group: 'org.json', name: 'json', version: '20160810'
    compile group: 'net.sf.json-lib', name: 'json-lib', version: '2.4', classifier: 'jdk15'
    compile group: 'com.google.guava', name: 'guava', version: '20.0'
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: '2.8.5'
    compile group: 'rome', name: 'rome', version: '1.0'
    compile group: 'com.google.code.findbugs', name: 'jsr305', version: '3.0.1'
    compile group: 'junit', name: 'junit', version: '4.12'
}
jar {
    manifest {
        attributes (
                'Main-Class': 'org.loklak.SusiServer',
                "Class-Path": configurations.compile.collect {  it.getName() }.join(' ')
        )
    }
}
